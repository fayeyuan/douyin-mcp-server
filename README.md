# æŠ–éŸ³æ— æ°´å°è§†é¢‘æ–‡æœ¬æå– MCP æœåŠ¡å™¨

[![PyPI version](https://badge.fury.io/py/douyin-mcp-server.svg)](https://badge.fury.io/py/douyin-mcp-server)
[![Python version](https://img.shields.io/pypi/pyversions/douyin-mcp-server.svg)](https://pypi.org/project/douyin-mcp-server/)

ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä»æŠ–éŸ³åˆ†äº«é“¾æ¥ä¸‹è½½æ— æ°´å°è§†é¢‘ï¼Œæå–éŸ³é¢‘å¹¶è½¬æ¢ä¸ºæ–‡æœ¬ã€‚

<a href="https://glama.ai/mcp/servers/@yzfly/douyin-mcp-server">
  <img width="380" height="200" src="https://glama.ai/mcp/servers/@yzfly/douyin-mcp-server/badge" alt="douyin-mcp-server MCP server" />
</a>

## åŠŸèƒ½ç‰¹æ€§

- ğŸµ ä»æŠ–éŸ³åˆ†äº«é“¾æ¥è·å–æ— æ°´å°è§†é¢‘
- ğŸ§ è‡ªåŠ¨æå–è§†é¢‘éŸ³é¢‘
- ğŸ“ ä½¿ç”¨AIè¯­éŸ³è¯†åˆ«æå–æ–‡æœ¬å†…å®¹
- ğŸ§¹ è‡ªåŠ¨æ¸…ç†ä¸­é—´ä¸´æ—¶æ–‡ä»¶
- ğŸ”§ æ”¯æŒè‡ªå®šä¹‰APIé…ç½®, API é»˜è®¤ä½¿ç”¨ [é˜¿é‡Œäº‘ç™¾ç‚¼API](https://help.aliyun.com/zh/model-studio/get-api-key?)

## ä½¿ç”¨æ–¹æ³•

1. è·å–`DASHSCOPE_API_KEY`: å‰å¾€ [é˜¿é‡Œäº‘ç™¾ç‚¼API](https://help.aliyun.com/zh/model-studio/get-api-key?)

![è·å–é˜¿é‡Œäº‘ç™¾ç‚¼API](https://files.mdnice.com/user/43439/36e658be-1ccf-41dd-87cf-d43fefde5c4e.png)

2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨Claude Desktop / Cherry Studio ç­‰æ”¯æŒ MCP Serverçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨ä¸‹é¢çš„"DASHSCOPE_API_KEY"ä¸­è®¾ç½®ï¼‰ï¼š

```json
{
  "mcpServers": {
    "douyin-mcp": {
      "command": "uvx",
      "args": ["douyin-mcp-server"],
      "env": {
        "DASHSCOPE_API_KEY": "sk-xxxx"
      }
    }
  }
}
```

3. æ­£å¸¸è°ƒç”¨MCP å·¥å…·å³å¯

## API é…ç½®è¯´æ˜

åŸç‰ˆæœ¬ä½¿ç”¨ç¡…åŸºæµåŠ¨çš„APIï¼Œå½“å‰ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼çš„APIï¼Œæ•ˆæœæ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œå¯¹æœ¬åœ°è®¡ç®—èµ„æºæ¶ˆè€—æ›´å°ã€‚

å‰å¾€é˜¿é‡Œäº‘ç™¾ç‚¼å¼€é€šAPIæœåŠ¡ï¼Œå°†è·å–çš„API Keyé…ç½®åˆ°ç¯å¢ƒå˜é‡ `DASHSCOPE_API_KEY` ä¸­ã€‚

[é˜¿é‡Œäº‘ç™¾ç‚¼API](https://help.aliyun.com/zh/model-studio/get-api-key?)

## ä½¿ç”¨æ—§ç‰ˆæœ¬ ï¼ˆ<= 1.1.0ï¼‰)

å¦‚æœä¹ æƒ¯ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼Œé‡ç‚¹æ˜¯è¦å®‰è£…`1.1.0`ç‰ˆæœ¬ï¼ŒAPI Key é…ç½®ä¸º `DOUYIN_API_KEY`ï¼Œåœ¨ç¡…åŸºæµåŠ¨æ³¨å†Œè´¦å·å¹¶è·å–API Key: https://cloud.siliconflow.cn/i/TxUlXG3u

1.1.0 ç‰ˆæœ¬æ–‡æ¡£ï¼šhttps://pypi.org/project/douyin-mcp-server/1.1.0/


```
{
  "mcpServers": {
    "douyin-mcp": {
      "command": "uvx",
      "args": ["uvx douyin-mcp-server@1.1.0"],
      "env": {
        "DOUYIN_API_KEY": "your-api-key-here"
      }
    }
  }
}
```


## å·¥å…·è¯´æ˜

### `get_douyin_download_link`

è·å–æŠ–éŸ³è§†é¢‘çš„æ— æ°´å°ä¸‹è½½é“¾æ¥ï¼Œæ— éœ€APIå¯†é’¥ã€‚

**å‚æ•°ï¼š**
- `share_link`: æŠ–éŸ³åˆ†äº«é“¾æ¥æˆ–åŒ…å«é“¾æ¥çš„æ–‡æœ¬

**è¿”å›ï¼š**
- åŒ…å«ä¸‹è½½é“¾æ¥å’Œè§†é¢‘ä¿¡æ¯çš„JSONæ ¼å¼æ•°æ®

### `extract_douyin_text`

å®Œæ•´çš„æ–‡æœ¬æå–å·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. è§£ææŠ–éŸ³åˆ†äº«é“¾æ¥
2. ç›´æ¥ä½¿ç”¨è§†é¢‘URLè¿›è¡Œè¯­éŸ³è¯†åˆ«
3. è¿”å›æå–çš„æ–‡æœ¬å†…å®¹

**å‚æ•°ï¼š**
- `share_link`: æŠ–éŸ³åˆ†äº«é“¾æ¥æˆ–åŒ…å«é“¾æ¥çš„æ–‡æœ¬
- `model`: è¯­éŸ³è¯†åˆ«æ¨¡å‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨paraformer-v2ï¼‰

**ç¯å¢ƒå˜é‡ï¼š**
- `DASHSCOPE_API_KEY`: é˜¿é‡Œäº‘ç™¾ç‚¼APIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰

### `parse_douyin_video_info`

ä»…è§£æè§†é¢‘åŸºæœ¬ä¿¡æ¯ï¼Œä¸ä¸‹è½½è§†é¢‘ã€‚

**å‚æ•°ï¼š**
- `share_link`: æŠ–éŸ³åˆ†äº«é“¾æ¥

### èµ„æºè®¿é—®

- `douyin://video/{video_id}`: é€šè¿‡è§†é¢‘IDè·å–è¯¦ç»†ä¿¡æ¯

## ä¾èµ–è¦æ±‚

- Python 3.10+
- requests
- ffmpeg-python
- tqdm
- mcp
- dashscope

## æ³¨æ„äº‹é¡¹
- åˆ‡æ¢åˆ°ä½¿ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼APIè¿›è¡Œè¯­éŸ³è¯†åˆ«ï¼Œæ›´å¿«æ›´å‡†
- éœ€è¦åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®æœ‰æ•ˆçš„é˜¿é‡Œäº‘ç™¾ç‚¼APIå¯†é’¥ `DASHSCOPE_API_KEY`
- è·å–ä¸‹è½½é“¾æ¥åŠŸèƒ½æ— éœ€APIå¯†é’¥
- æ”¯æŒå¤§éƒ¨åˆ†æŠ–éŸ³è§†é¢‘æ ¼å¼

## å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
git clone https://github.com/yzfly/douyin-mcp-server.git
cd douyin-mcp-server
pip install -e .
```

### è¿è¡Œæµ‹è¯•

```bash
python -m douyin_mcp_server.server
```

### åœ¨Claude Desktopä¸­é…ç½®ï¼ˆæœ¬åœ°æºç ï¼‰

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼š

```json
{
  "mcpServers": {
    "douyin-mcp": {
      "command": "uv",
      "args": [
        "run",
        "--directory",
        "/path/to/your/douyin-mcp-server",
        "python",
        "-m",
        "douyin_mcp_server"
      ],
      "env": {
        "DASHSCOPE_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

## âš ï¸ å…è´£å£°æ˜
- ä½¿ç”¨è€…å¯¹æœ¬é¡¹ç›®çš„ä½¿ç”¨ç”±ä½¿ç”¨è€…è‡ªè¡Œå†³å®šï¼Œå¹¶è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚ä½œè€…å¯¹ä½¿ç”¨è€…ä½¿ç”¨æœ¬é¡¹ç›®æ‰€äº§ç”Ÿçš„ä»»ä½•æŸå¤±ã€è´£ä»»ã€æˆ–é£é™©æ¦‚ä¸è´Ÿè´£ã€‚
- æœ¬é¡¹ç›®çš„ä½œè€…æä¾›çš„ä»£ç å’ŒåŠŸèƒ½æ˜¯åŸºäºç°æœ‰çŸ¥è¯†å’ŒæŠ€æœ¯çš„å¼€å‘æˆæœã€‚ä½œè€…æŒ‰ç°æœ‰æŠ€æœ¯æ°´å¹³åŠªåŠ›ç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ï¼Œä½†ä¸ä¿è¯ä»£ç å®Œå…¨æ²¡æœ‰é”™è¯¯æˆ–ç¼ºé™·ã€‚
- æœ¬é¡¹ç›®ä¾èµ–çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ã€æ’ä»¶æˆ–æœåŠ¡å„è‡ªéµå¾ªå…¶åŸå§‹å¼€æºæˆ–å•†ä¸šè®¸å¯ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡ŒæŸ¥é˜…å¹¶éµå®ˆç›¸åº”åè®®ï¼Œä½œè€…ä¸å¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶çš„ç¨³å®šæ€§ã€å®‰å…¨æ€§åŠåˆè§„æ€§æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚
- ä½¿ç”¨è€…åœ¨ä½¿ç”¨æœ¬é¡¹ç›®çš„ä»£ç å’ŒåŠŸèƒ½æ—¶ï¼Œå¿…é¡»è‡ªè¡Œç ”ç©¶ç›¸å…³æ³•å¾‹æ³•è§„ï¼Œå¹¶ç¡®ä¿å…¶ä½¿ç”¨è¡Œä¸ºåˆæ³•åˆè§„ã€‚ä»»ä½•å› è¿åæ³•å¾‹æ³•è§„è€Œå¯¼è‡´çš„æ³•å¾‹è´£ä»»å’Œé£é™©ï¼Œå‡ç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
- ä½¿ç”¨è€…ä¸å¾—ä½¿ç”¨æœ¬å·¥å…·ä»äº‹ä»»ä½•ä¾µçŠ¯çŸ¥è¯†äº§æƒçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæœªç»æˆæƒä¸‹è½½ã€ä¼ æ’­å—ç‰ˆæƒä¿æŠ¤çš„å†…å®¹ï¼Œå¼€å‘è€…ä¸å‚ä¸ã€ä¸æ”¯æŒã€ä¸è®¤å¯ä»»ä½•éæ³•å†…å®¹çš„è·å–æˆ–åˆ†å‘ã€‚
- æœ¬é¡¹ç›®ä¸å¯¹ä½¿ç”¨è€…æ¶‰åŠçš„æ•°æ®æ”¶é›†ã€å­˜å‚¨ã€ä¼ è¾“ç­‰å¤„ç†æ´»åŠ¨çš„åˆè§„æ€§æ‰¿æ‹…è´£ä»»ã€‚ä½¿ç”¨è€…åº”è‡ªè¡Œéµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œç¡®ä¿å¤„ç†è¡Œä¸ºåˆæ³•æ­£å½“ï¼›å› è¿è§„æ“ä½œå¯¼è‡´çš„æ³•å¾‹è´£ä»»ç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
- ä½¿ç”¨è€…åœ¨ä»»ä½•æƒ…å†µä¸‹å‡ä¸å¾—å°†æœ¬é¡¹ç›®çš„ä½œè€…ã€è´¡çŒ®è€…æˆ–å…¶ä»–ç›¸å…³æ–¹ä¸ä½¿ç”¨è€…çš„ä½¿ç”¨è¡Œä¸ºè”ç³»èµ·æ¥ï¼Œæˆ–è¦æ±‚å…¶å¯¹ä½¿ç”¨è€…ä½¿ç”¨æœ¬é¡¹ç›®æ‰€äº§ç”Ÿçš„ä»»ä½•æŸå¤±æˆ–æŸå®³è´Ÿè´£ã€‚
- åŸºäºæœ¬é¡¹ç›®è¿›è¡Œçš„ä»»ä½•äºŒæ¬¡å¼€å‘ã€ä¿®æ”¹æˆ–ç¼–è¯‘çš„ç¨‹åºä¸åŸåˆ›ä½œè€…æ— å…³ï¼ŒåŸåˆ›ä½œè€…ä¸æ‰¿æ‹…ä¸äºŒæ¬¡å¼€å‘è¡Œä¸ºæˆ–å…¶ç»“æœç›¸å…³çš„ä»»ä½•è´£ä»»ï¼Œä½¿ç”¨è€…åº”è‡ªè¡Œå¯¹å› äºŒæ¬¡å¼€å‘å¯èƒ½å¸¦æ¥çš„å„ç§æƒ…å†µè´Ÿå…¨éƒ¨è´£ä»»ã€‚
- æœ¬é¡¹ç›®ä¸æˆäºˆä½¿ç”¨è€…ä»»ä½•ä¸“åˆ©è®¸å¯ï¼›è‹¥ä½¿ç”¨æœ¬é¡¹ç›®å¯¼è‡´ä¸“åˆ©çº çº·æˆ–ä¾µæƒï¼Œä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…å…¨éƒ¨é£é™©å’Œè´£ä»»ã€‚æœªç»ä½œè€…æˆ–æƒåˆ©äººä¹¦é¢æˆæƒï¼Œä¸å¾—ä½¿ç”¨æœ¬é¡¹ç›®è¿›è¡Œä»»ä½•å•†ä¸šå®£ä¼ ã€æ¨å¹¿æˆ–å†æˆæƒã€‚
- ä½œè€…ä¿ç•™éšæ—¶ç»ˆæ­¢å‘ä»»ä½•è¿åæœ¬å£°æ˜çš„ä½¿ç”¨è€…æä¾›æœåŠ¡çš„æƒåˆ©ï¼Œå¹¶å¯èƒ½è¦æ±‚å…¶é”€æ¯å·²è·å–çš„ä»£ç åŠè¡ç”Ÿä½œå“ã€‚
- ä½œè€…ä¿ç•™åœ¨ä¸å¦è¡Œé€šçŸ¥çš„æƒ…å†µä¸‹æ›´æ–°æœ¬å£°æ˜çš„æƒåˆ©ï¼Œä½¿ç”¨è€…æŒç»­ä½¿ç”¨å³è§†ä¸ºæ¥å—ä¿®è®¢åçš„æ¡æ¬¾ã€‚

**åœ¨ä½¿ç”¨æœ¬é¡¹ç›®çš„ä»£ç å’ŒåŠŸèƒ½ä¹‹å‰ï¼Œè¯·æ‚¨è®¤çœŸè€ƒè™‘å¹¶æ¥å—ä»¥ä¸Šå…è´£å£°æ˜ã€‚å¦‚æœæ‚¨å¯¹ä¸Šè¿°å£°æ˜æœ‰ä»»ä½•ç–‘é—®æˆ–ä¸åŒæ„ï¼Œè¯·ä¸è¦ä½¿ç”¨æœ¬é¡¹ç›®çš„ä»£ç å’ŒåŠŸèƒ½ã€‚å¦‚æœæ‚¨ä½¿ç”¨äº†æœ¬é¡¹ç›®çš„ä»£ç å’ŒåŠŸèƒ½ï¼Œåˆ™è§†ä¸ºæ‚¨å·²å®Œå…¨ç†è§£å¹¶æ¥å—ä¸Šè¿°å…è´£å£°æ˜ï¼Œå¹¶è‡ªæ„¿æ‰¿æ‹…ä½¿ç”¨æœ¬é¡¹ç›®çš„ä¸€åˆ‡é£é™©å’Œåæœã€‚**

## è®¸å¯è¯

MIT License

## ä½œè€…

- **yzfly** - [yz.liu.me@gmail.com](mailto:yz.liu.me@gmail.com)
- GitHub: [https://github.com/yzfly](https://github.com/yzfly)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬
- æ”¯æŒæŠ–éŸ³è§†é¢‘æ–‡æœ¬æå–
- æ”¯æŒè·å–æ— æ°´å°è§†é¢‘ä¸‹è½½é“¾æ¥
- ä»ç¯å¢ƒå˜é‡è¯»å–APIå¯†é’¥
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- æ”¯æŒè‡ªå®šä¹‰APIé…ç½®

### v1.1.0
- ä¿®å¤æå–è§†é¢‘æ—¶æ–‡ä»¶åè¿‡é•¿çš„bug

### v1.2.0
- æ›´å¿«ã€æ›´å‡†çš„è§†é¢‘æ–‡æ¡ˆæå–
- åˆ‡æ¢åˆ°é˜¿é‡Œäº‘ç™¾ç‚¼APIï¼Œæå‡è¯†åˆ«å‡†ç¡®ç‡
- æ›´æ–°ç¯å¢ƒå˜é‡ä»DOUYIN_API_KEYåˆ°DASHSCOPE_API_KEY